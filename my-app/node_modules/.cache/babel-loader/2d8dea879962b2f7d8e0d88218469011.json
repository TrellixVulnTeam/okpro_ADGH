{"ast":null,"code":"var _jsxFileName = \"E:\\\\Khoahoc-Reactjs-KTCITY\\\\REACT\\\\my-app\\\\src\\\\components\\\\news\\\\HackerWithReducer.js\",\n    _s = $RefreshSig$();\n\n//https://hn.algolia.com/api/v1/search?query=react\nimport axios from \"axios\";\nimport React, { useReducer, useRef, useState } from \"react\";\nimport lodash from \"lodash\";\n/**Bài 72: Bài tập HackerNews API phần 1\r\n * kết nối api hackernews\r\n * bài 73:Bài tập HackerNews API phần 2\r\n * - làm chức năng tìm kiếm\r\n * bài 74:Bài tập HackerNews API phần 3\r\n * - làm chức năng loadding dữ liệu\r\n * bài 75:Bài tập HackerNews API phần 4\r\n * - Xử lý lỗi và đưa ra bên ngoài giao diện\r\n * Bài 76: Tối ưu giao diện HackerNews API\r\n * Bài 77: Bài tập HackerNews API - Fetching dữ liệu với button\r\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialSate = {\n  hits: [],\n  query: \"\",\n  loading: true,\n  errorMessage: \"\",\n  url: \"https://hn.algolia.com/api/v1/search?query=''\"\n}; //https://hn.algolia.com/api/v1/search?query=react\n\nconst hackerReducer = (state, action) => {\n  switch (action.type) {\n    case \"SET_DATA\":\n      {\n        //     const { hits, loading, errorMessage, url } = state;\n        // const newState = JSON.parse(JSON.stringify(state));\n        //     setOJState.loading = loading;\n        //     try {\n        //       const res = axios.get((setOJState.url = url));\n        //       if (res.data) {\n        //         setOJState.hits = hits;\n        //       } else {\n        //         setOJState.hits = [];\n        //       }\n        //       setOJState.loading = !loading;\n        //     } catch (err) {\n        //       setOJState.loading = !loading;\n        //       setOJState.errorMessage = errorMessage(``);\n        //     }\n        return { ...state,\n          hits: action.payload\n        };\n      }\n\n    case \"SET_LOADING\":\n      {\n        //     const { query } = action.payload;\n        //     const setOJState = JSON.parse(JSON.stringify(state));\n        //     setOJState.query = query;\n        return { ...state,\n          loading: action.payload\n        };\n      }\n\n    default:\n      break;\n  }\n};\n\nconst HackerWithReducer = () => {\n  _s();\n\n  const [state, dispatch] = useReducer(hackerReducer, initialSate);\n  const handleFetchData = useRef({});\n\n  handleFetchData.current = async () => {\n    dispatch({\n      type: \"SET_LOADING\"\n    });\n    console.log(\"working\");\n\n    try {\n      var _res$data, _res$data2;\n\n      const res = await axios.get(state.url);\n      console.log((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.hits);\n      dispatch({\n        type: \"SET_DATA\",\n        payload: (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.hits\n      });\n    } catch (err) {}\n  };\n\n  React.useEffect(() => {\n    handleFetchData.current();\n  }, []); // const handleOnChange = (e) => {\n  //   dispatch({\n  //     type: \"QUERY-DATA\",\n  //     query: e.target.value,\n  //   });\n  // };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white mx-auto mt-5 p-5 rounded-lg shadow-md w-2/4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex mb-5 gap-x-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        defaultValue: state.query // onChange={handleOnChange}\n        ,\n        className: \" py-2 px-3 text-lime-600\\r border border-gray-200\\r transition-all\\r focus:border-blue-900\\r block w-full rounded-md\",\n        placeholder: \"typing your keywork...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        // onClick={() => {\n        //   setUrl(`https://hn.algolia.com/api/v1/search?query=${query}`);\n        // }}\n        className: \"bg-blue-500\\r p-3 rounded-md\\r text-white font-semibold flex-shrink-0\",\n        children: \"Fecthing\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), state.loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading w-8 h-8 rounded-full \\r border-r-4 border-blue-500 border-4 \\r border-r-transparent animate-spin mx-auto my-10\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this), !state.loading && state.errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-400 my-5\",\n      children: state.errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap gap-3\",\n      children: !state.loading && state.hits.length > 0 && state.hits.map((item, index) => {\n        if (!item.title || item.title.length <= 0) return null;\n        return /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"p-2 bg-gray-100 rounded-md\",\n          children: item.title\n        }, item.title, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n\n_s(HackerWithReducer, \"8IzI88nCLNcR3+6U7XI7owdb28s=\");\n\n_c = HackerWithReducer;\nexport default HackerWithReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"HackerWithReducer\");","map":{"version":3,"sources":["E:/Khoahoc-Reactjs-KTCITY/REACT/my-app/src/components/news/HackerWithReducer.js"],"names":["axios","React","useReducer","useRef","useState","lodash","initialSate","hits","query","loading","errorMessage","url","hackerReducer","state","action","type","payload","HackerWithReducer","dispatch","handleFetchData","current","console","log","res","get","data","err","useEffect","length","map","item","index","title"],"mappings":"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","sourcesContent":["//https://hn.algolia.com/api/v1/search?query=react\r\nimport axios from \"axios\";\r\nimport React, { useReducer, useRef, useState } from \"react\";\r\nimport lodash from \"lodash\";\r\n/**Bài 72: Bài tập HackerNews API phần 1\r\n * kết nối api hackernews\r\n * bài 73:Bài tập HackerNews API phần 2\r\n * - làm chức năng tìm kiếm\r\n * bài 74:Bài tập HackerNews API phần 3\r\n * - làm chức năng loadding dữ liệu\r\n * bài 75:Bài tập HackerNews API phần 4\r\n * - Xử lý lỗi và đưa ra bên ngoài giao diện\r\n * Bài 76: Tối ưu giao diện HackerNews API\r\n * Bài 77: Bài tập HackerNews API - Fetching dữ liệu với button\r\n */\r\nconst initialSate = {\r\n  hits: [],\r\n  query: \"\",\r\n  loading: true,\r\n  errorMessage: \"\",\r\n  url: \"https://hn.algolia.com/api/v1/search?query=''\",\r\n};\r\n\r\n//https://hn.algolia.com/api/v1/search?query=react\r\nconst hackerReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"SET_DATA\": {\r\n      //     const { hits, loading, errorMessage, url } = state;\r\n      // const newState = JSON.parse(JSON.stringify(state));\r\n      //     setOJState.loading = loading;\r\n      //     try {\r\n      //       const res = axios.get((setOJState.url = url));\r\n      //       if (res.data) {\r\n      //         setOJState.hits = hits;\r\n      //       } else {\r\n      //         setOJState.hits = [];\r\n      //       }\r\n      //       setOJState.loading = !loading;\r\n      //     } catch (err) {\r\n      //       setOJState.loading = !loading;\r\n      //       setOJState.errorMessage = errorMessage(``);\r\n      //     }\r\n\r\n      return { ...state, hits: action.payload };\r\n    }\r\n    case \"SET_LOADING\": {\r\n      //     const { query } = action.payload;\r\n      //     const setOJState = JSON.parse(JSON.stringify(state));\r\n      //     setOJState.query = query;\r\n      return { ...state, loading: action.payload };\r\n    }\r\n    default:\r\n      break;\r\n  }\r\n};\r\nconst HackerWithReducer = () => {\r\n  const [state, dispatch] = useReducer(hackerReducer, initialSate);\r\n  const handleFetchData = useRef({});\r\n\r\n  handleFetchData.current = async () => {\r\n    dispatch({\r\n      type: \"SET_LOADING\",\r\n    });\r\n    console.log(\"working\");\r\n    try {\r\n      const res = await axios.get(state.url);\r\n      console.log(res.data?.hits);\r\n      dispatch({\r\n        type: \"SET_DATA\",\r\n        payload: res.data?.hits,\r\n      });\r\n    } catch (err) {}\r\n  };\r\n  React.useEffect(() => {\r\n    handleFetchData.current();\r\n  }, []);\r\n  // const handleOnChange = (e) => {\r\n  //   dispatch({\r\n  //     type: \"QUERY-DATA\",\r\n  //     query: e.target.value,\r\n  //   });\r\n  // };\r\n  return (\r\n    <div className=\"bg-white mx-auto mt-5 p-5 rounded-lg shadow-md w-2/4\">\r\n      <div className=\"flex mb-5 gap-x-4\">\r\n        <input\r\n          type=\"text\"\r\n          defaultValue={state.query}\r\n          // onChange={handleOnChange}\r\n          className=\" py-2 px-3 text-lime-600\r\n        border border-gray-200\r\n        transition-all\r\n        focus:border-blue-900\r\n         block w-full rounded-md\"\r\n          placeholder=\"typing your keywork...\"\r\n        />\r\n        <button\r\n          // onClick={() => {\r\n          //   setUrl(`https://hn.algolia.com/api/v1/search?query=${query}`);\r\n          // }}\r\n          className=\"bg-blue-500\r\n          p-3 rounded-md\r\n         text-white font-semibold flex-shrink-0\"\r\n        >\r\n          Fecthing\r\n        </button>\r\n      </div>\r\n      {state.loading && (\r\n        <div\r\n          className=\"loading w-8 h-8 rounded-full \r\n        border-r-4 border-blue-500 border-4 \r\n        border-r-transparent animate-spin mx-auto my-10\"\r\n        ></div>\r\n      )}\r\n      {!state.loading && state.errorMessage && (\r\n        <div className=\"text-red-400 my-5\">{state.errorMessage}</div>\r\n      )}\r\n      <div className=\"flex flex-wrap gap-3\">\r\n        {!state.loading &&\r\n          state.hits.length > 0 &&\r\n          state.hits.map((item, index) => {\r\n            if (!item.title || item.title.length <= 0) return null;\r\n            return (\r\n              <h3 className=\"p-2 bg-gray-100 rounded-md\" key={item.title}>\r\n                {item.title}\r\n              </h3>\r\n            );\r\n          })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HackerWithReducer;\r\n"]},"metadata":{},"sourceType":"module"}