{"ast":null,"code":"var _jsxFileName = \"C:\\\\Acer D\\\\Study\\\\Khoahoc-Reactjs-KTCITY\\\\Khoahoc-Reactjs-KTCITY\\\\REACT\\\\my-app\\\\src\\\\components\\\\tictactoe\\\\GameWithReducer.js\",\n    _s = $RefreshSig$();\n\n// Bài 34 35 36 37: tìm hiểu về reducer\nimport React, { useReducer } from \"react\";\nimport { calculateWinner } from \"../../helpers\";\nimport Board from \"./Board\";\nimport \"./GameStyle.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialSate = {\n  board: Array(9).fill(null),\n  xIsNext: true\n};\n\nconst gameReducer = (state, action) => {\n  switch (action.type) {\n    case \"CLICK\":\n      {\n        //   console.log(state, action.payload);\n        const {\n          board,\n          xIsNext\n        } = state;\n        const {\n          index,\n          winner\n        } = action.payload;\n        if (winner || board[index]) return state;\n        const nextState = JSON.parse(JSON.stringify(state)); //copy sâu bên trong obj\n\n        console.log(\"gameReducer ~ nextState\", nextState);\n        nextState.board[index] = xIsNext ? \"X\" : \"O\";\n        nextState.xIsNext = !xIsNext;\n        return nextState; //   break;\n      }\n\n    case \"RESET\":\n      {\n        const nextState = JSON.parse(JSON.stringify(state));\n        nextState.board = Array(9).fill(null);\n        nextState.xIsNext = true;\n        return nextState;\n      }\n    //   break;\n\n    default:\n      break;\n  }\n\n  return state;\n};\n\nconst GameWithReducer = () => {\n  _s();\n\n  const [state, dispatch] = useReducer(gameReducer, initialSate);\n  const winner = calculateWinner(state.board2); // giá trị X hoặc O\n\n  const handleClick = index => {\n    dispatch({\n      type: \"CLICK\",\n      payload: {\n        index,\n        winner\n      }\n    });\n  };\n\n  const handleResetGame = () => {\n    dispatch({\n      type: \"RESET\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [winner ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-winner\",\n      children: [\"winner is \", winner]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(Board, {\n      cells: state.board,\n      onClick: handleClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"game-reset\",\n      onClick: handleResetGame,\n      children: \"Reset game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_s(GameWithReducer, \"AQy1xtJjh3zpuKYINrwyY15b6lE=\");\n\n_c = GameWithReducer;\nexport default GameWithReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"GameWithReducer\");","map":{"version":3,"sources":["C:/Acer D/Study/Khoahoc-Reactjs-KTCITY/Khoahoc-Reactjs-KTCITY/REACT/my-app/src/components/tictactoe/GameWithReducer.js"],"names":["React","useReducer","calculateWinner","Board","initialSate","board","Array","fill","xIsNext","gameReducer","state","action","type","index","winner","payload","nextState","JSON","parse","stringify","console","log","GameWithReducer","dispatch","board2","handleClick","handleResetGame"],"mappings":";;;AAAA;AACA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,eAAT,QAAgC,eAAhC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAO,iBAAP;;AACA,MAAMC,WAAW,GAAG;AAClBC,EAAAA,KAAK,EAAEC,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,IAAd,CADW;AAElBC,EAAAA,OAAO,EAAE;AAFS,CAApB;;AAIA,MAAMC,WAAW,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACrC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,OAAL;AAAc;AACZ;AACA,cAAM;AAAEP,UAAAA,KAAF;AAASG,UAAAA;AAAT,YAAqBE,KAA3B;AACA,cAAM;AAAEG,UAAAA,KAAF;AAASC,UAAAA;AAAT,YAAoBH,MAAM,CAACI,OAAjC;AACA,YAAID,MAAM,IAAIT,KAAK,CAACQ,KAAD,CAAnB,EAA4B,OAAOH,KAAP;AAC5B,cAAMM,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeT,KAAf,CAAX,CAAlB,CALY,CAKyC;;AACrDU,QAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCL,SAAvC;AACAA,QAAAA,SAAS,CAACX,KAAV,CAAgBQ,KAAhB,IAAyBL,OAAO,GAAG,GAAH,GAAS,GAAzC;AACAQ,QAAAA,SAAS,CAACR,OAAV,GAAoB,CAACA,OAArB;AACA,eAAOQ,SAAP,CATY,CAUZ;AACD;;AACD,SAAK,OAAL;AAAc;AACZ,cAAMA,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeT,KAAf,CAAX,CAAlB;AACAM,QAAAA,SAAS,CAACX,KAAV,GAAkBC,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,IAAd,CAAlB;AACAS,QAAAA,SAAS,CAACR,OAAV,GAAoB,IAApB;AACA,eAAOQ,SAAP;AACD;AACD;;AACA;AACE;AArBJ;;AAuBA,SAAON,KAAP;AACD,CAzBD;;AA0BA,MAAMY,eAAe,GAAG,MAAM;AAAA;;AAC5B,QAAM,CAACZ,KAAD,EAAQa,QAAR,IAAoBtB,UAAU,CAACQ,WAAD,EAAcL,WAAd,CAApC;AACA,QAAMU,MAAM,GAAGZ,eAAe,CAACQ,KAAK,CAACc,MAAP,CAA9B,CAF4B,CAEkB;;AAC9C,QAAMC,WAAW,GAAIZ,KAAD,IAAW;AAC7BU,IAAAA,QAAQ,CAAC;AACPX,MAAAA,IAAI,EAAE,OADC;AAEPG,MAAAA,OAAO,EAAE;AACPF,QAAAA,KADO;AAEPC,QAAAA;AAFO;AAFF,KAAD,CAAR;AAOD,GARD;;AASA,QAAMY,eAAe,GAAG,MAAM;AAC5BH,IAAAA,QAAQ,CAAC;AACPX,MAAAA,IAAI,EAAE;AADC,KAAD,CAAR;AAGD,GAJD;;AAKA,sBACE;AAAA,eACGE,MAAM,gBAAG;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA,+BAAwCA,MAAxC;AAAA;AAAA;AAAA;AAAA;AAAA,YAAH,GAA2D,EADpE,eAEE,QAAC,KAAD;AAAO,MAAA,KAAK,EAAEJ,KAAK,CAACL,KAApB;AAA2B,MAAA,OAAO,EAAEoB;AAApC;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE;AAAQ,MAAA,SAAS,EAAC,YAAlB;AAA+B,MAAA,OAAO,EAAEC,eAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAHF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AASD,CA1BD;;GAAMJ,e;;KAAAA,e;AA4BN,eAAeA,eAAf","sourcesContent":["// Bài 34 35 36 37: tìm hiểu về reducer\r\nimport React, { useReducer } from \"react\";\r\nimport { calculateWinner } from \"../../helpers\";\r\nimport Board from \"./Board\";\r\nimport \"./GameStyle.css\";\r\nconst initialSate = {\r\n  board: Array(9).fill(null),\r\n  xIsNext: true,\r\n};\r\nconst gameReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"CLICK\": {\r\n      //   console.log(state, action.payload);\r\n      const { board, xIsNext } = state;\r\n      const { index, winner } = action.payload;\r\n      if (winner || board[index]) return state;\r\n      const nextState = JSON.parse(JSON.stringify(state)); //copy sâu bên trong obj\r\n      console.log(\"gameReducer ~ nextState\", nextState);\r\n      nextState.board[index] = xIsNext ? \"X\" : \"O\";\r\n      nextState.xIsNext = !xIsNext;\r\n      return nextState;\r\n      //   break;\r\n    }\r\n    case \"RESET\": {\r\n      const nextState = JSON.parse(JSON.stringify(state));\r\n      nextState.board = Array(9).fill(null);\r\n      nextState.xIsNext = true;\r\n      return nextState;\r\n    }\r\n    //   break;\r\n    default:\r\n      break;\r\n  }\r\n  return state;\r\n};\r\nconst GameWithReducer = () => {\r\n  const [state, dispatch] = useReducer(gameReducer, initialSate);\r\n  const winner = calculateWinner(state.board2); // giá trị X hoặc O\r\n  const handleClick = (index) => {\r\n    dispatch({\r\n      type: \"CLICK\",\r\n      payload: {\r\n        index,\r\n        winner,\r\n      },\r\n    });\r\n  };\r\n  const handleResetGame = () => {\r\n    dispatch({\r\n      type: \"RESET\",\r\n    });\r\n  };\r\n  return (\r\n    <div>\r\n      {winner ? <div className=\"game-winner\">winner is {winner}</div> : \"\"}\r\n      <Board cells={state.board} onClick={handleClick}></Board>\r\n      <button className=\"game-reset\" onClick={handleResetGame}>\r\n        Reset game\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameWithReducer;\r\n"]},"metadata":{},"sourceType":"module"}