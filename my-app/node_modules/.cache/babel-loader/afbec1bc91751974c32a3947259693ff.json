{"ast":null,"code":"var _jsxFileName = \"E:\\\\Khoahoc-Reactjs-KTCITY\\\\REACT\\\\my-app\\\\src\\\\components\\\\news\\\\HackerWithReducer.js\",\n    _s = $RefreshSig$();\n\n//https://hn.algolia.com/api/v1/search?query=react\nimport axios from \"axios\";\nimport React, { useReducer, useRef, useState } from \"react\";\nimport lodash from \"lodash\";\n/**Bài 72: Bài tập HackerNews API phần 1\r\n * kết nối api hackernews\r\n * bài 73:Bài tập HackerNews API phần 2\r\n * - làm chức năng tìm kiếm\r\n * bài 74:Bài tập HackerNews API phần 3\r\n * - làm chức năng loadding dữ liệu\r\n * bài 75:Bài tập HackerNews API phần 4\r\n * - Xử lý lỗi và đưa ra bên ngoài giao diện\r\n * Bài 76: Tối ưu giao diện HackerNews API\r\n * Bài 77: Bài tập HackerNews API - Fetching dữ liệu với button\r\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialSate = {\n  hits: [],\n  query: \"\",\n  loading: true,\n  errorMessage: \"\",\n  url: \"https://hn.algolia.com/api/v1/search?query=''\"\n}; //https://hn.algolia.com/api/v1/search?query=react\n\nconst hackerReducer = (state, action) => {\n  switch (action.type) {\n    case \"FETCH-DATA\":\n      {\n        const {\n          hits,\n          loading,\n          errorMessage,\n          url\n        } = state;\n        const setOJState = JSON.parse(JSON.stringify(state));\n        setOJState.loading = loading;\n\n        try {\n          const res = axios.get(setOJState.url = url);\n\n          if (res.data) {\n            setOJState.hits = hits;\n          } else {\n            setOJState.hits = [];\n          }\n\n          setOJState.loading = !loading;\n        } catch (err) {\n          setOJState.loading = !loading;\n          setOJState.errorMessage = errorMessage(``);\n        }\n\n        return setOJState;\n      }\n\n    case \"QUERY-DATA\":\n      {\n        const {\n          query\n        } = action.payload;\n        const setOJState = JSON.parse(JSON.stringify(state));\n        setOJState.query = query;\n        return setOJState;\n      }\n\n    default:\n      break;\n  }\n};\n\nconst HackerWithReducer = () => {\n  _s();\n\n  const [state, dispatch] = useReducer(hackerReducer, initialSate);\n  const handleFetchData = useRef({});\n\n  handleFetchData.current = async () => {\n    dispatch({\n      type: \"FETCH-DATA\"\n    });\n  };\n\n  React.useEffect(() => {\n    handleFetchData.current();\n  }, []);\n\n  const handleOnChange = e => {\n    dispatch({\n      type: \"QUERY-DATA\",\n      query: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white mx-auto mt-5 p-5 rounded-lg shadow-md w-2/4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex mb-5 gap-x-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        defaultValue: state.query,\n        onChange: handleOnChange,\n        className: \" py-2 px-3 text-lime-600\\r border border-gray-200\\r transition-all\\r focus:border-blue-900\\r block w-full rounded-md\",\n        placeholder: \"typing your keywork...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        // onClick={() => {\n        //   setUrl(`https://hn.algolia.com/api/v1/search?query=${query}`);\n        // }}\n        className: \"bg-blue-500\\r p-3 rounded-md\\r text-white font-semibold flex-shrink-0\",\n        children: \"Fecthing\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), state.loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading w-8 h-8 rounded-full \\r border-r-4 border-blue-500 border-4 \\r border-r-transparent animate-spin mx-auto my-10\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), !state.loading && state.errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-400 my-5\",\n      children: state.errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap gap-3\",\n      children: !state.loading && state.hits.length > 0 && state.hits.map((item, index) => {\n        if (!item.title || item.title.length <= 0) return null;\n        return /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"p-2 bg-gray-100 rounded-md\",\n          children: item.title\n        }, item.title, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n\n_s(HackerWithReducer, \"8IzI88nCLNcR3+6U7XI7owdb28s=\");\n\n_c = HackerWithReducer;\nexport default HackerWithReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"HackerWithReducer\");","map":{"version":3,"sources":["E:/Khoahoc-Reactjs-KTCITY/REACT/my-app/src/components/news/HackerWithReducer.js"],"names":["axios","React","useReducer","useRef","useState","lodash","initialSate","hits","query","loading","errorMessage","url","hackerReducer","state","action","type","setOJState","JSON","parse","stringify","res","get","data","err","payload","HackerWithReducer","dispatch","handleFetchData","current","useEffect","handleOnChange","e","target","value","length","map","item","index","title"],"mappings":"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","sourcesContent":["//https://hn.algolia.com/api/v1/search?query=react\r\nimport axios from \"axios\";\r\nimport React, { useReducer, useRef, useState } from \"react\";\r\nimport lodash from \"lodash\";\r\n/**Bài 72: Bài tập HackerNews API phần 1\r\n * kết nối api hackernews\r\n * bài 73:Bài tập HackerNews API phần 2\r\n * - làm chức năng tìm kiếm\r\n * bài 74:Bài tập HackerNews API phần 3\r\n * - làm chức năng loadding dữ liệu\r\n * bài 75:Bài tập HackerNews API phần 4\r\n * - Xử lý lỗi và đưa ra bên ngoài giao diện\r\n * Bài 76: Tối ưu giao diện HackerNews API\r\n * Bài 77: Bài tập HackerNews API - Fetching dữ liệu với button\r\n */\r\nconst initialSate = {\r\n  hits: [],\r\n  query: \"\",\r\n  loading: true,\r\n  errorMessage: \"\",\r\n  url: \"https://hn.algolia.com/api/v1/search?query=''\",\r\n};\r\n\r\n//https://hn.algolia.com/api/v1/search?query=react\r\nconst hackerReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"FETCH-DATA\": {\r\n      const { hits, loading, errorMessage, url } = state;\r\n      const setOJState = JSON.parse(JSON.stringify(state));\r\n      setOJState.loading = loading;\r\n      try {\r\n        const res = axios.get((setOJState.url = url));\r\n        if (res.data) {\r\n          setOJState.hits = hits;\r\n        } else {\r\n          setOJState.hits = [];\r\n        }\r\n        setOJState.loading = !loading;\r\n      } catch (err) {\r\n        setOJState.loading = !loading;\r\n        setOJState.errorMessage = errorMessage(``);\r\n      }\r\n      return setOJState;\r\n    }\r\n    case \"QUERY-DATA\": {\r\n      const { query } = action.payload;\r\n      const setOJState = JSON.parse(JSON.stringify(state));\r\n      setOJState.query = query;\r\n      return setOJState;\r\n    }\r\n    default:\r\n      break;\r\n  }\r\n};\r\nconst HackerWithReducer = () => {\r\n  const [state, dispatch] = useReducer(hackerReducer, initialSate);\r\n  const handleFetchData = useRef({});\r\n  handleFetchData.current = async () => {\r\n    dispatch({\r\n      type: \"FETCH-DATA\",\r\n    });\r\n  };\r\n  React.useEffect(() => {\r\n    handleFetchData.current();\r\n  }, []);\r\n  const handleOnChange = (e) => {\r\n    dispatch({\r\n      type: \"QUERY-DATA\",\r\n      query: e.target.value,\r\n    });\r\n  };\r\n  return (\r\n    <div className=\"bg-white mx-auto mt-5 p-5 rounded-lg shadow-md w-2/4\">\r\n      <div className=\"flex mb-5 gap-x-4\">\r\n        <input\r\n          type=\"text\"\r\n          defaultValue={state.query}\r\n          onChange={handleOnChange}\r\n          className=\" py-2 px-3 text-lime-600\r\n        border border-gray-200\r\n        transition-all\r\n        focus:border-blue-900\r\n         block w-full rounded-md\"\r\n          placeholder=\"typing your keywork...\"\r\n        />\r\n        <button\r\n          // onClick={() => {\r\n          //   setUrl(`https://hn.algolia.com/api/v1/search?query=${query}`);\r\n          // }}\r\n          className=\"bg-blue-500\r\n          p-3 rounded-md\r\n         text-white font-semibold flex-shrink-0\"\r\n        >\r\n          Fecthing\r\n        </button>\r\n      </div>\r\n      {state.loading && (\r\n        <div\r\n          className=\"loading w-8 h-8 rounded-full \r\n        border-r-4 border-blue-500 border-4 \r\n        border-r-transparent animate-spin mx-auto my-10\"\r\n        ></div>\r\n      )}\r\n      {!state.loading && state.errorMessage && (\r\n        <div className=\"text-red-400 my-5\">{state.errorMessage}</div>\r\n      )}\r\n      <div className=\"flex flex-wrap gap-3\">\r\n        {!state.loading &&\r\n          state.hits.length > 0 &&\r\n          state.hits.map((item, index) => {\r\n            if (!item.title || item.title.length <= 0) return null;\r\n            return (\r\n              <h3 className=\"p-2 bg-gray-100 rounded-md\" key={item.title}>\r\n                {item.title}\r\n              </h3>\r\n            );\r\n          })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HackerWithReducer;\r\n"]},"metadata":{},"sourceType":"module"}